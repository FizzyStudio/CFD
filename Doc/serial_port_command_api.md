
# serial port command api

> __author__ = 'ascetic'

* 通过串口发送指定的命令给FPGA以实现LED的时序控制

### 测量光

#### 设置测量光参数

    参数设置：55 AA 01 脉宽（10-10000us, 2 bytes）周期（100-1000ms, 2 bytes）                 
    应答：AA 55 01 脉宽（10-10000us, 2 bytes）周期（100-1000ms, 2 bytes）

##### example

* 55 AA 01 07 D0 01 F4  设置脉宽2000us，周期500ms（2Hz）
* 55 AA 01 00 64 00 64  设置脉宽100us，周期100ms（10Hz）

#### 读取测量光参数

    参数读取：55 AA 02 
    应答：AA 55 02 脉宽（10-10000us, 2 bytes）周期（100-1000ms, 2 bytes）

### 光化光

##### 设置光化光参数

    参数设置：55 AA 03 光化光脉宽（10-1000us, 2bytes） 光化光循环次数（10-2000, 2 bytes） 光化光下降沿到测量光上升沿（100-1000us, 2bytes） 测量光下降沿到新的光化光上升沿（1000-10000us, 2bytes）
    应答：AA 55 03 光化光脉宽（10-1000us, 2bytes） 光化光循环次数（10-2000, 2 bytes） 光化光下降沿到测量光上升沿（100-1000us, 2bytes） 测量光下降沿到新的光化光上升沿（1000-10000us, 2bytes）

* 光化光循环次数：                指的是N个光化光循环后，触发一次测量脉冲
* 光化光下降沿到测量光上升沿：     指的是光化光下降沿到测量光上升沿的时间间隔,us为单位
* 测量光下降沿到新的光化光上升沿：  指的是测量光下降沿到新的光化光上升沿的时间间隔,us为单位
* 光化光周期为固定值： 1000us
* 测量脉冲的脉宽与***测量光参数***中的脉宽一致

##### example

* 55 AA 03 01 F4 00 32 01 F4 13 88  设置光化光脉宽500us,每50个光化光循环后出现一次测量脉冲,光化光下降沿到测量光上升沿500us，测量光下降沿到新的光化光上升沿5000us

#### 读取光化光参数

    参数读取：55 AA 04 
    应答：AA 55 04 光化光脉宽（10-1000us, 2bytes） 光化光循环次数（10-2000, 2 bytes） 光化光下降沿到测量光上升沿（100-1000us, 2bytes） 测量光下降沿到新的光化光上升沿（1000-10000us, 2bytes）
    


